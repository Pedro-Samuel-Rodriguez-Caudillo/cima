# FLUJO DE TRABAJO VISUAL - CIMA

## ?? Flujo Completo de Feature a Producción

```
???????????????????????????????????????????????????????????????????????
?                         DESARROLLO LOCAL                             ?
?                                                                      ?
?  1. Crear feature branch desde develop                              ?
?     git checkout -b feature/nueva-funcionalidad                      ?
?                                                                      ?
?  2. Desarrollar y commitear                                          ?
?     git commit -m "feat: nueva funcionalidad"                        ?
?                                                                      ?
?  3. Push a GitHub                                                    ?
?     git push origin feature/nueva-funcionalidad                      ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?                    GITHUB - PULL REQUEST                             ?
?                                                                      ?
?  4. Crear PR: feature/nueva ? develop                                ?
?     ? CI runs automatically (build + test)                          ?
?     ? No requiere aprobación (agilidad)                             ?
?     ? Requiere que CI pase                                           ?
?                                                                      ?
?  5. Merge PR                                                         ?
?     ? feature se integra a develop                                   ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?                      BRANCH: develop                                 ?
?                                                                      ?
?  Estado: Integración continua                                        ?
?  CI: Build + Test                                                    ?
?  Deploy: ? No deploy automático                                     ?
?                                                                      ?
?  ? Acumulación de features listas                                    ?
?  ? Testing local e integración                                       ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ? Cuando esté listo para QA
                            ?
???????????????????????????????????????????????????????????????????????
?                    GITHUB - PULL REQUEST                             ?
?                                                                      ?
?  6. Crear PR: develop ? staging                                      ?
?     ? CI runs (build + test)                                        ?
?     ? REQUIERE 1 aprobación                                          ?
?     ? Requiere que CI pase                                           ?
?                                                                      ?
?  7. Review + Aprobar PR                                              ?
?     ? Revisar changelog                                              ?
?     ? Verificar features incluidas                                   ?
?                                                                      ?
?  8. Merge PR                                                         ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?                      BRANCH: staging                                 ?
?                                                                      ?
?  Estado: Pre-producción / QA                                         ?
?  CI: Build + Test                                                    ?
?  Deploy: ? Railway (automático)                                     ?
?                                                                      ?
?  ? Testing completo en ambiente real                                 ?
?  ? Validación de QA                                                  ?
?  ? Verificación de integraciones                                     ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ? QA aprobado
                            ?
???????????????????????????????????????????????????????????????????????
?                         CREAR RELEASE                                ?
?                                                                      ?
?  9. Crear release branch                                             ?
?     git checkout staging                                             ?
?     git checkout -b release/v1.2.3                                   ?
?                                                                      ?
?  10. Actualizar versión                                              ?
?      ? Actualizar .csproj files                                      ?
?      ? Actualizar CHANGELOG.md                                       ?
?                                                                      ?
?  11. Push release branch                                             ?
?      git push origin release/v1.2.3                                  ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?                    GITHUB - PULL REQUEST                             ?
?                                                                      ?
?  12. Crear PR: release/v1.2.3 ? main                                 ?
?      ? CI runs (build + test)                                       ?
?      ? REQUIERE 1+ aprobación                                        ?
?      ? Requiere que CI pase                                          ?
?      ? Final review antes de producción                             ?
?                                                                      ?
?  13. Aprobar + Merge PR                                              ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?                       BRANCH: main                                   ?
?                                                                      ?
?  Estado: PRODUCCIÓN                                                  ?
?  CI: Build + Test + Security                                         ?
?  Deploy: ? GitHub Actions ? Production Server                       ?
?                                                                      ?
?  14. Deploy automático                                               ?
?      ? Build Docker image                                            ?
?      ? Push to registry                                              ?
?      ? SSH to production server                                      ?
?      ? Backup database + files                                       ?
?      ? Deploy new version                                            ?
?      ? Health check                                                  ?
?                                                                      ?
?  15. Crear tag                                                       ?
?      git tag v1.2.3                                                  ?
?      git push origin v1.2.3                                          ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?                        POST-DEPLOYMENT                               ?
?                                                                      ?
?  16. Mergear cambios de vuelta a develop                             ?
?      git checkout develop                                            ?
?      git merge release/v1.2.3                                        ?
?      git push origin develop                                         ?
?                                                                      ?
?  17. Eliminar release branch                                         ?
?      git branch -d release/v1.2.3                                    ?
?      git push origin --delete release/v1.2.3                         ?
???????????????????????????????????????????????????????????????????????
```

## ?? Flujo de Hotfix (Emergencia)

```
???????????????????????????????????????????????????????????????????????
?                    PRODUCCIÓN - BUG CRÍTICO                          ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?  1. Crear hotfix desde main                                          ?
?     git checkout main                                                ?
?     git checkout -b hotfix/fix-critical-bug                          ?
?                                                                      ?
?  2. Desarrollar fix                                                  ?
?     git commit -m "hotfix: fix critical bug"                         ?
?                                                                      ?
?  3. Push + PR a main                                                 ?
?     git push origin hotfix/fix-critical-bug                          ?
?     Create PR: hotfix/fix-critical-bug ? main                        ?
?                                                                      ?
?  4. Fast-track approval + merge                                      ?
?     ? Requiere aprobación urgente                                    ?
?     ? CI debe pasar                                                  ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?  5. Deploy automático a producción                                   ?
???????????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????????
?  6. Mergear hotfix a staging y develop                               ?
?     git checkout staging                                             ?
?     git merge hotfix/fix-critical-bug                                ?
?     git push origin staging                                          ?
?                                                                      ?
?     git checkout develop                                             ?
?     git merge hotfix/fix-critical-bug                                ?
?     git push origin develop                                          ?
???????????????????????????????????????????????????????????????????????
```

## ?? Estados de los Branches

```
???????????????????????????????????????????????????????????????????
? Branch   ? Protegido  ? Aprobación ? CI Required  ? Deploy Auto ?
???????????????????????????????????????????????????????????????????
? main     ? ? Sí      ? 1+         ? ? Sí        ? ? Prod     ?
? staging  ? ? Sí      ? 1          ? ? Sí        ? ? Railway  ?
? develop  ? ? Sí      ? 0 (opt)    ? ? Sí        ? ? No       ?
? feature/*? ? No      ? N/A        ? ? Sí        ? ? No       ?
? bugfix/* ? ? No      ? N/A        ? ? Sí        ? ? No       ?
? hotfix/* ? ? No      ? N/A        ? ? Sí        ? ? No       ?
???????????????????????????????????????????????????????????????????
```

## ?? Ciclo Típico de Sprint

```
Semana 1-2: Desarrollo
??? feature/analytics      (developer A)
??? feature/notifications  (developer B)
??? bugfix/ui-fixes       (developer C)
     ?
     Merge a develop (individual, cuando estén listos)

Día 14: Review Sprint
??? PR: develop ? staging
    ??? Review de changelog
    ??? Verificación de features
    ??? Merge

Día 14-15: Testing en Staging
??? QA completo
    ??? Functional tests
    ??? Integration tests
    ??? User acceptance

Día 16: Deploy a Producción
??? PR: staging ? main
    ??? Final review
    ??? Merge
    ??? Deploy automático

Día 17+: Monitoreo
??? Verificar logs, metrics, user feedback
```

## ?? Ejemplo Real: Nueva Feature

```bash
# DÍA 1: Empezar feature
$ git checkout develop
$ git pull origin develop
$ git checkout -b feature/add-payment-gateway
# ... desarrollo durante 3 días ...

# DÍA 4: Feature completa
$ git add .
$ git commit -m "feat: add payment gateway integration"
$ git push origin feature/add-payment-gateway
# Crear PR en GitHub UI: feature/add-payment-gateway ? develop
# CI corre ? ? Pasa
# Mergear (no requiere aprobación)

# DÍA 5-10: Más features se agregan a develop
# develop acumula: payment, notifications, analytics, bugfixes

# DÍA 11: Ready for staging
# Crear PR en GitHub UI: develop ? staging
# Review changelog, aprobar, mergear
# Railway deploya automáticamente ?

# DÍA 11-13: Testing en staging
# QA tests todo
# Bugs menores se fixean en develop y re-mergen a staging

# DÍA 14: QA aprobado
$ git checkout staging
$ git pull origin staging
$ git checkout -b release/v2.1.0
# Actualizar versión en .csproj
# Actualizar CHANGELOG.md
$ git add .
$ git commit -m "chore: bump version to 2.1.0"
$ git push origin release/v2.1.0

# Crear PR en GitHub UI: release/v2.1.0 ? main
# Final review
# Aprobar + mergear
# GitHub Actions deploya a producción ?

# DÍA 14: Post-deployment
$ git tag v2.1.0
$ git push origin v2.1.0
$ git checkout develop
$ git merge release/v2.1.0
$ git push origin develop
$ git branch -d release/v2.1.0
$ git push origin --delete release/v2.1.0

# ? Feature en producción!
```

## ?? Quick Reference

### ¿En qué branch estoy?
```bash
git branch --show-current
```

### ¿Qué features están en staging pero no en develop?
```bash
git log develop..staging --oneline
```

### ¿Qué está en producción?
```bash
git log staging..main --oneline
git tag --list
```

### Limpiar branches locales
```bash
git fetch --prune
git branch --merged develop | grep -v "develop" | xargs git branch -d
```

---

**Regla de Oro:** 
- **NUNCA** push directo a main, staging, o develop
- **SIEMPRE** usa Pull Requests
- **ESPERA** a que CI pase
- **ELIMINA** feature branches después de merge
