@inherits LayoutComponentBase
@using cima.Blazor.Client.Components.Common
@using cima.Blazor.Client.Components.Auth
@using MudBlazor
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthenticationStateProvider

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

@* Skip link para accesibilidad - navegación por teclado *@
<a href="#main-content" class="skip-link">
    Saltar al contenido principal
</a>

<MustChangePasswordGuard>
    <div class="flex flex-col min-h-screen bg-gray-50">
        <header class="sticky top-0 z-40 w-full">
            <Navbar />
        </header>

        <main id="main-content" class="flex-grow" tabindex="-1">
            <PageTransition>
                @Body
            </PageTransition>
        </main>

        <Footer />
    </div>
</MustChangePasswordGuard>

<EnvironmentToast />

@code {
    // La autorización se maneja por el atributo [Authorize] 
    // en las páginas y por AuthorizeRouteView en Routes.razor
}
