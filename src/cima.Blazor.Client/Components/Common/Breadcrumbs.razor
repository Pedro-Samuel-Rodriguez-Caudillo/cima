@inject NavigationManager Navigation

<nav class="cima-breadcrumbs @(Animated ? "cima-breadcrumbs-animated" : "")" aria-label="Breadcrumb">
    <ol class="flex items-center gap-2">
        @foreach (var (item, index) in Items.Select((item, i) => (item, i)))
        {
            @if (index > 0)
            {
                <li class="cima-breadcrumb-separator" aria-hidden="true">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </li>
            }
            
            <li>
                @if (index == Items.Count - 1)
                {
                    <span class="cima-breadcrumb-item cima-breadcrumb-item-active" aria-current="page">
                        @item.Label
                    </span>
                }
                else
                {
                    <a href="@item.Href" class="cima-breadcrumb-item">
                        @if (index == 0 && ShowHomeIcon)
                        {
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                      d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                            </svg>
                        }
                        else
                        {
                            @item.Label
                        }
                    </a>
                }
            </li>
        }
    </ol>
</nav>

@code {
    [Parameter] public List<BreadcrumbItem> Items { get; set; } = new();
    [Parameter] public bool ShowHomeIcon { get; set; } = true;
    [Parameter] public bool Animated { get; set; } = true;

    public class BreadcrumbItem
    {
        public string Label { get; set; } = "";
        public string Href { get; set; } = "";

        public BreadcrumbItem() { }
        
        public BreadcrumbItem(string label, string href = "")
        {
            Label = label;
            Href = href;
        }
    }
}
