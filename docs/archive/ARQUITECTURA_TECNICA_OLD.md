# ??? ARQUITECTURA TÉCNICA - PLATAFORMA CIMA

## ?? Visión General

Aplicación **monolítica por capas** sobre ABP Framework, con frontend **Blazor Web App** (SSR + WASM interactivo).

```
???????????????????????????????????????????????????????????????????
?                       CLIENTE (NAVEGADOR)                       ?
?   HTML + CSS + Blazor Components (SSR + WASM Interactive)       ?
???????????????????????????????????????????????????????????????????
                              ? HTTPS
???????????????????????????????????????????????????????????????????
?                   cima.Blazor (Web App Server)                  ?
?  ?? Rendering: Server-Side (SSR) + Cliente (WASM)              ?
?  ?? Layout: AdminLayout, PublicLayout                          ?
?  ?? Pages: Properties, Architects, Admin/*                     ?
?  ?? Shared: Components reutilizables                           ?
???????????????????????????????????????????????????????????????????
                              ? HTTP/OpenIddict
???????????????????????????????????????????????????????????????????
?                   cima.HttpApi (REST Controllers)               ?
?  ?? PropertiesController                                        ?
?  ?? ArchitectsController                                        ?
?  ?? ContactRequestsController                                   ?
?  ?? StatisticsController                                        ?
?  ?? ExceptionFilter + Auth middleware                           ?
???????????????????????????????????????????????????????????????????
                              ? DI (Autofac)
???????????????????????????????????????????????????????????????????
?              cima.Application (Application Services)             ?
?  ?? PropertyAppService    (CRUD, publish, archive)             ?
?  ?? ArchitectAppService   (CRUD, portfolio)                    ?
?  ?? ContactRequestAppService (CRUD, reply)                     ?
?  ?? StatisticsAppService  (KPIs, trends)                       ?
?  ?? AutoMapper profiles                                         ?
???????????????????????????????????????????????????????????????????
                              ? Inyección
???????????????????????????????????????????????????????????????????
?                cima.Domain (Domain Model - DDD)                 ?
?  ?? Aggregates: Property, Architect, ContactRequest            ?
?  ?? Value Objects: PropertyImage                               ?
?  ?? Enums: PropertyStatus, ContactRequestStatus, UserRole      ?
?  ?? Repositories (interfaces): IPropertyRepository, etc.        ?
?  ?? Domain Events (opcional en Fase 2)                         ?
???????????????????????????????????????????????????????????????????
                              ? EF Core
???????????????????????????????????????????????????????????????????
?         cima.EntityFrameworkCore (ORM Implementation)            ?
?  ?? CimaDbContext                                               ?
?  ?? PropertyRepository, ArchitectRepository, etc.               ?
?  ?? Migrations folder (versionadas)                             ?
?  ?? Seeders                                                     ?
?  ?? DbContextOptions (Fluent API mappings)                      ?
???????????????????????????????????????????????????????????????????
                              ? ADO.NET
???????????????????????????????????????????????????????????????????
?                  PostgreSQL 16 (Base de Datos)                  ?
?  ?? Schemas: public (tablas), creadas via migrations           ?
?  ?? Tables: Properties, Architects, ContactRequests, ...        ?
?  ?? Indices: (Status,ArchitectId), CreatedAt, ...              ?
?  ?? Constraints: FK, PK, NOT NULL, UNIQUE, etc.                ?
???????????????????????????????????????????????????????????????????
```

---

## ?? ESTRUCTURA DE PROYECTOS

```
src/
?
?? cima.Domain (Class Library)
?  ?? Entities/
?  ?  ?? Property.cs (Aggregate Root)
?  ?  ?? Architect.cs (Aggregate Root)
?  ?  ?? ContactRequest.cs (Aggregate Root)
?  ?  ?? PropertyImage.cs (Value Object)
?  ?? Repositories/ (interfaces solo)
?  ?  ?? IPropertyRepository.cs
?  ?  ?? IArchitectRepository.cs
?  ?  ?? IContactRequestRepository.cs
?  ?? cimaModuleDependency.cs
?
?? cima.Domain.Shared (Class Library)
?  ?? Dtos/
?  ?  ?? PropertyDto.cs
?  ?  ?? ArchitectDto.cs
?  ?  ?? ContactRequestDto.cs
?  ?? Constants/
?  ?  ?? CimaConsts.cs (validation rules)
?  ?? Enums/
?  ?  ?? PropertyStatus.cs, ContactRequestStatus.cs, UserRole.cs
?  ?? cimaDomainSharedModule.cs
?
?? cima.Application.Contracts (Class Library)
?  ?? Services/ (interfaces)
?  ?  ?? IPropertyAppService.cs
?  ?  ?? IArchitectAppService.cs
?  ?  ?? IContactRequestAppService.cs
?  ?  ?? IStatisticsAppService.cs
?  ?? cima.Application.ContractsModule.cs
?
?? cima.Application (Class Library)
?  ?? Services/
?  ?  ?? PropertyAppService.cs (implements IPropertyAppService)
?  ?  ?? ArchitectAppService.cs
?  ?  ?? ContactRequestAppService.cs
?  ?  ?? StatisticsAppService.cs
?  ?? Mapping/
?  ?  ?? cimaAutoMapperProfile.cs (Entity ? Dto)
?  ?? Validators/
?  ?  ?? CreateUpdatePropertyDtoValidator.cs (FluentValidation)
?  ?? cimaApplicationModule.cs
?
?? cima.EntityFrameworkCore (Class Library)
?  ?? DbContexts/
?  ?  ?? CimaDbContext.cs
?  ?? Repositories/
?  ?  ?? PropertyRepository.cs (implements IPropertyRepository)
?  ?  ?? ArchitectRepository.cs
?  ?  ?? ContactRequestRepository.cs
?  ?? Migrations/
?  ?  ?? 20240101120000_InitialCreate.cs
?  ?  ?? 20240102140000_AddIndexes.cs
?  ?  ?? CimaDbContextModelSnapshot.cs
?  ?? Seeders/
?  ?  ?? cimaDataSeedContributor.cs
?  ?? cima.EntityFrameworkCoreModule.cs
?
?? cima.HttpApi (Class Library)
?  ?? Controllers/
?  ?  ?? PropertiesController.cs
?  ?  ?? ArchitectsController.cs
?  ?  ?? ContactRequestsController.cs
?  ?  ?? StatisticsController.cs (Admin)
?  ?? Filters/
?  ?  ?? GlobalExceptionFilter.cs
?  ?? cima.HttpApiModule.cs
?
?? cima.HttpApi.Client (Class Library)
?  ?? Clients/ (proxy generators - apbauto)
?  ?  ?? IPropertiesClient.cs
?  ?  ?? ...
?  ?? cima.HttpApi.ClientModule.cs
?
?? cima.Blazor (ASP.NET Core - Blazor Web App)
?  ?? Pages/
?  ?  ?? Auth/
?  ?  ?  ?? Login.razor
?  ?  ?  ?? Logout.razor
?  ?  ?? Properties/
?  ?  ?  ?? Index.razor (catálogo público)
?  ?  ?  ?? Detail.razor (detalle + contact form)
?  ?  ?? Architects/
?  ?  ?  ?? Index.razor (listado)
?  ?  ?  ?? Profile.razor (perfil individual)
?  ?  ?? Admin/
?  ?  ?  ?? Properties/
?  ?  ?  ?  ?? Index.razor (admin CRUD)
?  ?  ?  ?  ?? Create.razor
?  ?  ?  ?  ?? Edit.razor
?  ?  ?  ?? ContactRequests/
?  ?  ?  ?  ?? Index.razor
?  ?  ?  ?? Users/
?  ?  ?  ?  ?? Index.razor
?  ?  ?  ?? Statistics/
?  ?  ?     ?? Dashboard.razor
?  ?  ?? Components/
?  ?  ?  ?? App.razor (raíz)
?  ?  ?  ?? Routes.razor (routing)
?  ?  ?  ?? ...
?  ?  ?? Home.razor
?  ?? Shared/
?  ?  ?? AdminLayout.razor (sidebar navigation)
?  ?  ?? PublicLayout.razor
?  ?  ?? PropertyCard.razor (reutilizable)
?  ?  ?? PropertyImageGallery.razor
?  ?  ?? ContactForm.razor (modal)
?  ?  ?? NavMenu.razor
?  ?? wwwroot/
?  ?  ?? css/
?  ?  ?  ?? app.css (global + Tailwind)
?  ?  ?  ?? custom.css
?  ?  ?? js/
?  ?  ?  ?? app.js
?  ?  ?  ?? interop.js (JS ? .NET)
?  ?  ?? images/
?  ?     ?? properties/ (upload destino)
?  ?? appsettings.json
?  ?? appsettings.Development.json
?  ?? Program.cs (WebApplication builder, middleware)
?  ?? cimaBlazorModule.cs
?  ?? Dockerfile
?
?? cima.Blazor.Client (Blazor WebAssembly - Class Library)
?  ?? Pages/
?  ?  ?? (Componentes interactivos)
?  ?? Services/
?  ?  ?? HttpClient wrappers
?  ?? wwwroot/
?  ?  ?? index.html
?  ?? App.razor
?  ?? cimaBlazorClientModule.cs
?  ?? Program.cs
?
?? cima.DbMigrator (Console App)
   ?? appsettings.json
   ?? appsettings.secrets.json
   ?? Program.cs (run migrations)
   ?? DbMigratorHostedService.cs
```

---

## ??? MODELO DE DOMINIO (DDD)

### Agregados

#### **1. Property (Aggregate Root)**
```csharp
Property
?? Id: Guid (PK)
?? Title: string (200 chars, required)
?? Description: string (5000 chars, nullable)
?? Location: string (500 chars, required)
?? Price: decimal (18,2) // $
?? Area: decimal (10,2) // m²
?? Bedrooms: int
?? Bathrooms: int
?? Status: PropertyStatus (Draft|Published|Archived)
?? ArchitectId: Guid (FK ? Architect)
?? CreatedAt: DateTime
?? CreatedBy: Guid (auditoría)
?? LastModifiedAt: DateTime?
?? LastModifiedBy: Guid?
?? Images: List<PropertyImage> (owned collection)
?? Architect: Architect (navigation)

Métodos (Domain Logic):
  • Publish() ? valida y cambia status a Published
  • Archive() ? cambia a Archived
  • AddImage(url, order) ? agrega imagen
  • RemoveImage(imageId) ? elimina imagen
```

#### **2. Architect (Aggregate Root)**
```csharp
Architect
?? Id: Guid (PK)
?? UserId: Guid (FK ? Identity.User, unique)
?? Bio: string (2000 chars)
?? PortfolioUrl: string (500 chars)
?? Properties: ICollection<Property> (navigation)

Métodos:
  • GetPublishedProperties() ? IEnumerable<Property>
  • UpdateProfile(bio, portfolioUrl)
```

#### **3. ContactRequest (Aggregate Root)**
```csharp
ContactRequest
?? Id: Guid (PK)
?? PropertyId: Guid (FK ? Property, cascade delete)
?? ArchitectId: Guid (FK ? Architect)
?? Name: string (100 chars, required)
?? Email: string (256 chars, required, validated)
?? Phone: string (20 chars)
?? Message: string (5000 chars, required)
?? Status: ContactRequestStatus (New|Replied|Closed)
?? CreatedAt: DateTime
?? ReplyNotes: string (nullable)
?? Property: Property (navigation)
?? Architect: Architect (navigation)

Métodos:
  • MarkAsReplied(notes)
  • Close()
```

#### **4. PropertyImage (Value Object)**
```csharp
PropertyImage (Owned by Property)
?? ImageId: Guid
?? Url: string // /images/properties/{propertyId}/{imageId}.jpg
?? DisplayOrder: int
?? AltText: string
?? FileSize: long (bytes)
?? ContentType: string (mime type)

Sin métodos - inmutable en collection
```

---

## ?? ENTIDAD-RELACIÓN (EER)

```
????????????????????
?   AspNetUsers    ? (ABP Identity)
?  ?????????????????
?  Id (PK)         ?
?  UserName        ?
?  Email           ?
?  PasswordHash    ?
????????????????????
         ? 1
         ? (FK)
         ?
    ?????????????????????
    ?   Architect       ?
    ?  ?????????????????
    ?  Id (PK)         ?
    ?  UserId (FK,U)   ????? Único: 1 usuario = 1 arquitecto
    ?  Bio             ?
    ?  PortfolioUrl    ?
    ????????????????????
         ? 1
         ? (One-to-Many)
         ?
         ?                    ??????????????????????
         ?                    ?   PropertyImage    ?
         ?                    ?  ?????????????????
         ?                    ?  (Owned Collection)?
         ?                    ?  ImageId          ?
????????????????????          ?  Url              ?
?    Property      ???????????  DisplayOrder     ?
?  ?????????????????  1       ?  AltText          ?
?  Id (PK)         ?   Many   ?  FileSize         ?
?  Title (I)       ?          ?  ContentType      ?
?  Description     ?          ??????????????????????
?  Location (I)    ?
?  Price (I)       ?
?  Area            ?
?  Bedrooms        ?
?  Bathrooms       ?
?  Status (I)      ??????? Index
?  ArchitectId(FK) ?     ? (Status, ArchitectId)
?  CreatedAt (I)   ?
?  CreatedBy       ?
????????????????????
         ? 1
         ? (One-to-Many)
         ?
         ?
????????????????????????????
?   ContactRequest         ?
?  ?????????????????????????
?  Id (PK)                 ?
?  PropertyId (FK)         ? ?? Cascade delete
?  ArchitectId (FK)        ?
?  Name (I)                ?
?  Email (I)               ?
?  Phone                   ?
?  Message                 ?
?  Status (I)              ?
?  CreatedAt (I)           ?
?  ReplyNotes              ?
????????????????????????????

Índices (I):
  • Properties: (Status, ArchitectId), CreatedAt
  • ContactRequests: (Status, CreatedAt), PropertyId
  • Architects: UserId (Unique)
```

---

## ?? FLUJOS PRINCIPALES

### **Flujo 1: Catálogo Público (GET Properties Published)**

```
1. Visitante accede a /properties
   ?
2. Blazor Server renderiza Properties/Index.razor (SSR)
   ?? OnInitializedAsync() ejecuta
   ?? Llama PropertyAppService.GetPublishedAsync(filter, paging)
   ?
3. PropertyAppService
   ?? Valida parámetros
   ?? Construye IQueryable con filtros
   ?? Delega a PropertyRepository
   ?
4. PropertyRepository
   ?? DbContext.Properties
   ?? Where(p => p.Status == Published)
   ?? OrderBy(p => p.CreatedAt).Descending()
   ?? Skip/Take (pagination)
   ?? Include(p => p.Architect)
   ?? Include(p => p.Images)
   ?? ToPagedListAsync()
   ?
5. EF Core ? SQL Query ? PostgreSQL
   ?
6. Resultado: List<Property> con related data
   ?
7. AutoMapper: Property ? PropertyDto
   ?
8. Retorna: PagedResultDto<PropertyDto>
   ?
9. Blazor Component renderiza grid
   ?? Cards con PropertyCard.razor component
   ?? Imagen principal, título, precio, ubicación
   ?? Link a Detail.razor
   ?
10. HTML completo + CSS (Tailwind) + JS interop
    ?
11. Browser renderiza página HTML final
```

### **Flujo 2: Admin Publica Propiedad**

```
1. Admin login ? OpenIddict genera JWT token
   ?
2. Admin navega a /admin/properties/create
   ?? @attribute [Authorize(Roles = "Admin,Moderator")]
   ?? Verifica token ? ? autorizado
   ?
3. PropertyCreate.razor renderiza form
   ?? Campos: Title, Description, Location, Price, Area, etc.
   ?? Dropdown: ArchitectId (GET /api/architects)
   ?? Status inicial: Draft
   ?
4. Admin completa form y presiona "Save"
   ?
5. Form valida client-side (Blazorise)
   ?? Required fields
   ?? Price > 0
   ?? Email format
   ?
6. POST /api/properties { CreateUpdatePropertyDto }
   ?? Authorization header: Bearer {token}
   ?? Server verifica JWT y roles
   ?
7. PropertiesController.CreateAsync(dto)
   ?? [Authorize] middleware valida token
   ?? [Authorize(CimaPermissions.Properties.Create)] valida permiso
   ?
8. PropertyAppService.CreateAsync(dto)
   ?? Mapea dto ? Entity usando AutoMapper
   ?? Valida con FluentValidation
   ?? Crea Property(id, architectId, ...)
   ?? SetStatus(Draft)
   ?? SetAudit(CurrentUser.Id, DateTime.Now)
   ?
9. PropertyRepository.InsertAsync(property)
   ?? DbContext.Properties.Add(property)
   ?? DbContext.SaveChangesAsync()
   ?
10. EF Core ? SQL INSERT ? PostgreSQL
    ?
11. Retorna: PropertyDto (con ID generado)
    ?
12. Blazor component ? Toast: ? Property created
    ?
13. Redirect a /admin/properties/edit/{id}
```

### **Flujo 3: Visitante Contacta Arquitecto**

```
1. Visitante en Properties/Detail.razor
   ?? Ve botón: "Contactar Arquitecto"
   ?
2. Click ? Modal ContactForm.razor abre
   ?? NO requiere login (AllowAnonymous)
   ?? Campos: Name, Email, Phone, Message
   ?
3. Visitante completa form
   ?? Validación client-side
   ?
4. Click "Enviar"
   ?
5. POST /api/contact-requests { CreateContactRequestDto }
   ?? PropertyId, ArchitectId, Name, Email, Phone, Message
   ?? No incluye Authorization header
   ?
6. ContactRequestsController.CreateAsync(dto)
   ?? [AllowAnonymous] en endpoint
   ?? Permite acceso sin token
   ?
7. ContactRequestAppService.CreateAsync(dto)
   ?? Valida email format
   ?? Valida message no vacío
   ?? Crea ContactRequest
   ?? SetStatus(New)
   ?? SetCreatedAt(DateTime.Now)
   ?
8. ContactRequestRepository.InsertAsync(contactRequest)
   ?
9. EF Core ? SQL INSERT ? PostgreSQL
   ?
10. Retorna: ContactRequestDto
    ?
11. Toast: ? Gracias por tu mensaje
    ?
12. Admin ve en /admin/contact-requests
    ?? Status: New (resaltado)
    ?? Puede marcar como Replied o Close
```

---

## ?? AUTORIZACIÓN (RBAC)

```
Roles:
?? Admin
?  ?? Todos los permisos
?  ?? Ver dashboard, gestionar usuarios
?
?? Moderator
?  ?? Gestionar propiedades (Create, Edit, Delete, Publish)
?  ?? Gestionar contactos
?  ?? NO: gestionar usuarios
?
?? Architect
   ?? Ver propias propiedades
   ?? Ver contactos de propias propiedades
   ?? NO: crear propiedades (Admin asigna)

Permisos (Fine-grained):
?? CimaPermissions.Properties.Create
?? CimaPermissions.Properties.Edit
?? CimaPermissions.Properties.Delete
?? CimaPermissions.Properties.Publish
?? CimaPermissions.ContactRequests.Reply
?? CimaPermissions.Statistics.View
?? CimaPermissions.Users.Manage
?? CimaPermissions.Architects.Manage

Asignación:
?? Admin role
?  ?? Todos los permisos
?? Moderator role
?  ?? Properties.Create, Edit, Delete, Publish
?  ?? ContactRequests.Reply
?  ?? Statistics.View
?? Architect role
   ?? Permisos lecturasobra propias entidades
```

---

## ?? ENDPOINTS API PRINCIPALES

```
PUBLIC (sin auth):
GET    /api/properties
       /api/properties/{id}
       /api/properties?filter=&status=Published&architectId=...
POST   /api/contact-requests (crear solicitud de contacto)
GET    /api/architects
GET    /api/architects/{id}

ADMIN (con Authorize + permisos):
GET    /api/properties (todas, incluyendo drafts)
POST   /api/properties (crear propiedad)
PUT    /api/properties/{id} (editar)
DELETE /api/properties/{id} (eliminar)
POST   /api/properties/{id}/publish (publicar)
POST   /api/properties/{id}/archive (archivar)
POST   /api/properties/{id}/images (upload imagen)
DELETE /api/properties/{id}/images/{imageId} (eliminar imagen)

GET    /api/contact-requests
GET    /api/contact-requests/{id}
POST   /api/contact-requests/{id}/reply (marcar respondida)
POST   /api/contact-requests/{id}/close (cerrar)

GET    /api/architects
PUT    /api/architects/{id} (editar perfil)

GET    /api/statistics/dashboard (KPIs)
GET    /api/statistics/contact-requests-trend (gráfico)

IDENTITY (OpenIddict):
POST   /connect/token (login)
POST   /connect/revocation (logout)
GET    /api/identity/my-profile (user actual)
```

---

## ??? BASE DE DATOS (PostgreSQL)

### Tabla: Properties
```sql
CREATE TABLE "Properties" (
  "Id" UUID PRIMARY KEY,
  "Title" VARCHAR(200) NOT NULL,
  "Description" VARCHAR(5000),
  "Location" VARCHAR(500) NOT NULL,
  "Price" NUMERIC(18,2) NOT NULL,
  "Area" NUMERIC(10,2),
  "Bedrooms" INT NOT NULL,
  "Bathrooms" INT NOT NULL,
  "Status" INT NOT NULL, -- 0=Draft, 1=Published, 2=Archived
  "ArchitectId" UUID NOT NULL REFERENCES "Architects"("Id") ON DELETE RESTRICT,
  "CreatedAt" TIMESTAMP NOT NULL,
  "CreatedBy" UUID,
  "LastModifiedAt" TIMESTAMP,
  "LastModifiedBy" UUID,
  "ConcurrencyStamp" VARCHAR(40),
  "ExtraProperties" JSONB
);

CREATE INDEX "IX_Properties_Status_ArchitectId" ON "Properties"("Status", "ArchitectId");
CREATE INDEX "IX_Properties_CreatedAt" ON "Properties"("CreatedAt");
```

### Tabla: Architects
```sql
CREATE TABLE "Architects" (
  "Id" UUID PRIMARY KEY,
  "UserId" UUID NOT NULL UNIQUE REFERENCES "AspNetUsers"("Id"),
  "Bio" VARCHAR(2000),
  "PortfolioUrl" VARCHAR(500),
  "ConcurrencyStamp" VARCHAR(40),
  "ExtraProperties" JSONB
);

CREATE INDEX "IX_Architects_UserId" ON "Architects"("UserId");
```

### Tabla: ContactRequests
```sql
CREATE TABLE "ContactRequests" (
  "Id" UUID PRIMARY KEY,
  "PropertyId" UUID NOT NULL REFERENCES "Properties"("Id") ON DELETE CASCADE,
  "ArchitectId" UUID NOT NULL REFERENCES "Architects"("Id") ON DELETE RESTRICT,
  "Name" VARCHAR(100) NOT NULL,
  "Email" VARCHAR(256) NOT NULL,
  "Phone" VARCHAR(20),
  "Message" VARCHAR(5000) NOT NULL,
  "Status" INT NOT NULL, -- 0=New, 1=Replied, 2=Closed
  "CreatedAt" TIMESTAMP NOT NULL,
  "ReplyNotes" VARCHAR(5000),
  "ConcurrencyStamp" VARCHAR(40),
  "ExtraProperties" JSONB
);

CREATE INDEX "IX_ContactRequests_Status_CreatedAt" ON "ContactRequests"("Status", "CreatedAt");
CREATE INDEX "IX_ContactRequests_PropertyId" ON "ContactRequests"("PropertyId");
```

### Tabla: PropertyImages (Owned Collection)
```sql
CREATE TABLE "PropertyImages" (
  "PropertyId" UUID NOT NULL REFERENCES "Properties"("Id") ON DELETE CASCADE,
  "ImageId" UUID NOT NULL,
  "Url" VARCHAR(500) NOT NULL,
  "DisplayOrder" INT NOT NULL,
  "AltText" VARCHAR(500),
  "FileSize" BIGINT,
  "ContentType" VARCHAR(50),
  PRIMARY KEY ("PropertyId", "ImageId")
);
```

---

## ?? TECNOLOGÍAS & VERSIONES

| Capa | Librería | Versión | Propósito |
|------|----------|---------|----------|
| **Runtime** | .NET | 9.0 | Plataforma |
| **Web Framework** | ASP.NET Core | 9.0 | HTTP server |
| **Blazor** | Blazor Web App | 9.0 | SSR + WASM UI |
| **Business Layer** | ABP Framework | 9.3.6 | DDD, modularidad, permisos |
| **ORM** | Entity Framework Core | 9.0 | Data access |
| **Database** | PostgreSQL | 16-alpine | Relational DB |
| **Auth** | OpenIddict | 5.x | OAuth2 / OIDC server |
| **Identity** | ABP Identity | 9.3.6 | User/Role management |
| **UI Components** | Blazorise | 1.8.1 | Bootstrap5 components |
| **Icons** | FontAwesome | 6.x | UI icons |
| **Styling** | Tailwind CSS | 3.x | Utility-first CSS |
| **Validation** | FluentValidation | 11.x | DTO validation |
| **Mapping** | AutoMapper | 13.x | DTO ? Entity mapping |
| **Logging** | Serilog | 9.x | Structured logging |
| **DI/IoC** | Autofac | 7.x | Dependency injection |
| **Swagger** | Swashbuckle | ABP integrated | API documentation |
| **Docker** | Docker & Compose | Latest | Containerization |
| **CI/CD** | GitHub Actions | Native | Automation |

---

## ? CONVENCIONES DE CÓDIGO

```
Namespaces:
  Entities          ? cima.Domain.Entities
  DTOs              ? cima.Domain.Shared.Dtos
  Services          ? cima.Application.Services
  Controllers       ? cima.HttpApi.Controllers
  Repositories      ? cima.EntityFrameworkCore.Repositories
  Pages             ? cima.Blazor.Pages.{Feature}

Naming:
  Interfaces        ? I{Name}
  Services          ? {Name}AppService
  Repositories      ? {Name}Repository
  DbContext         ? {SolutionName}DbContext
  Components        ? {Name}.razor
  Pages             ? {Feature}/{Name}.razor

Async:
  Methods           ? {Name}Async() (siempre async)
  HTTP calls        ? await _httpClient.GetAsync()
  DB operations     ? await _repository.GetAsync()

Authentication:
  Header            ? Authorization: Bearer {jwt_token}
  Claims            ? User.FindFirst(ClaimTypes.NameIdentifier)
  Roles             ? [Authorize(Roles = "Admin")]
  Permissions       ? [Authorize(CimaPermissions.{Feature}.{Action})]
```

---

**Última actualización:** Semana 1 setup  
**Próxima revisión:** Después de implementar seeders (Martes EOD)

